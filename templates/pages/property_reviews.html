{% extends 'base/users.html' %}

{% block title %}Reviews for {{ property.title }}{% endblock %}

{% block content %}
<div class="d-flex justify-content-center mb-3">
  <a href="{{ url_for('listings') }}" class="btn btn-secondary">&larr; Back to Properties</a>
</div>
<div class="d-flex justify-content-center">
  <div style="max-width:600px; width:100%;">
    <h2 class="text-center mb-4">Reviews for {{ property.title }}</h2>
    <form method="POST" class="mb-4">
      <label for="rating">Rating:</label>
      <select name="rating" id="rating" class="form-select mb-2" required>
        <option value="5">5 - Excellent</option>
        <option value="4">4 - Good</option>
        <option value="3">3 - Average</option>
        <option value="2">2 - Poor</option>
        <option value="1">1 - Terrible</option>
      </select>
      <textarea name="content" class="form-control mb-2" placeholder="Write your review..." required></textarea>
      <button type="submit" class="btn btn-primary w-100">Submit Review</button>
    </form>
    {% for review in reviews %}
      <div class="card mb-2">
        <div class="card-body">
          <div>
            <strong>{{ review.user.name if review.user else 'Anonymous' }}</strong>
            <span class="text-warning">{% for i in range(review.rating) %}â˜…{% endfor %}</span>
          </div>
          <p>{{ review.content }}</p>
          <small>{{ review.timestamp.strftime('%Y-%m-%d %H:%M') }}</small>
        </div>
      </div>
    {% else %}
      <p class="text-center">No reviews yet.</p>
    {% endfor %}
  </div>
</div>
{% endblock %}